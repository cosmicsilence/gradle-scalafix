plugins {
    id 'groovy'
    id 'maven-publish'
    id 'org.ajoberstar.reckon' version '0.12.0'
}

group 'io.cosmicsilence'

repositories {
    mavenCentral()
}

dependencies {
    implementation gradleApi()
    implementation localGroovy()
    compile 'ch.epfl.scala:scalafix-interfaces:0.9.11'
    testCompile 'junit:junit:4.12'
}

reckon {
    scopeFromProp()
    stageFromProp('beta', 'rc', 'final')
}

publishing {
    repositories {
        maven {
            name = "GitHubPackages"
            url = uri("https://maven.pkg.github.com/cosmicsilence/gradle-scalafix")
            credentials {
                username = project.findProperty("github.user") ?: System.getenv("GITHUB_USER")
                password = project.findProperty("github.key")  ?: System.getenv("GITHUB_KEY")
            }
        }
    }
    publications {
        jar(MavenPublication) {
            from(components.java)
        }
    }
}